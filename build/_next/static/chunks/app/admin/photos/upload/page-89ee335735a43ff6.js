(self.webpackChunk_N_E=self.webpackChunk_N_E||[]).push([[662],{124:(e,a,t)=>{"use strict";t.r(a),t.d(a,{default:()=>x});var o=t(5155),r=t(2115),i=t(6046),s=t(8173),d=t.n(s),n=t(5565),l=t(3312),c=t(3900),u=t(8986),p=t(814),f=t(530),h=t(2888),g=t(4762),m=t(4586);function b(e){let{onUploadSuccess:a,onUploadError:t,className:s=""}=e,[d,n]=(0,r.useState)(!1),l=(0,i.useRouter)();return(0,o.jsx)("div",{children:(0,o.jsx)(m.jo,{className:"bg-blue-600 hover:bg-blue-700 text-white font-medium py-2 px-4 rounded-md transition-colors ".concat(d?"opacity-50 cursor-not-allowed":""," ").concat(s),uploadPreset:"landscape_photos",onUpload:e=>{n(!1),e.info&&e.info.secure_url&&(console.log("Upload successful:",e.info.secure_url),a&&a({public_id:e.info.public_id,secure_url:e.info.secure_url}),l.refresh())},onError:e=>{n(!1),console.error("Upload error:",e),t&&t(e)},options:{sources:["local","url","camera"],multiple:!1,maxFiles:1,clientAllowedFormats:["jpg","jpeg","png","webp"],maxFileSize:1e7},children:d?"Uploading...":"Upload Image"})})}function x(){let e=(0,i.useRouter)(),[a,t]=(0,r.useState)(!1),[s,m]=(0,r.useState)({title:"",category:"All"===f.JN[0]?f.JN[1]:f.JN[0],location:"",description:"",image:""}),x=e=>{let{name:a,value:t}=e.target;m({...s,[a]:t})},y=async a=>{if(a.preventDefault(),t(!0),!s.image){p.oR.error("Please upload an image"),t(!1);return}try{var o;let a;(0,g.s)("photo_upload",{category:s.category,status:"started"});let t={title:s.title,category:s.category,location:s.location||"",description:s.description||"",image:s.image},r=await fetch("/api/photos/upload",{method:"POST",headers:{"Content-Type":"application/json"},body:JSON.stringify(t)}),i=r.headers.get("content-type");if(i&&i.includes("application/json"))a=await r.json();else{let e=await r.text();throw console.error("Received non-JSON response:",e),Error("Server returned an invalid response format")}if(!r.ok){if(a.details)throw Error("".concat(a.error,": ").concat(a.details));throw Error(a.error||"Failed to upload photo")}(0,g.s)("photo_upload",{category:s.category,status:"completed",photo_id:null===(o=a.photo)||void 0===o?void 0:o.id}),p.oR.success("Photo saved successfully!"),e.refresh(),e.push("/admin/photos")}catch(e){(0,g.s)("photo_upload",{category:s.category,status:"failed",error:e instanceof Error?e.message:"Unknown error"}),console.error("Upload error:",e),p.oR.error(e instanceof Error?e.message:"An error occurred during upload")}finally{t(!1)}};return(0,o.jsxs)("div",{children:[(0,o.jsxs)("div",{className:"mb-6",children:[(0,o.jsx)(l.$,{variant:"ghost",asChild:!0,className:"text-zinc-400 hover:text-white p-0 mb-4",children:(0,o.jsxs)(d(),{href:"/admin/photos",children:[(0,o.jsx)(h.kRp,{className:"mr-2 h-4 w-4"})," Back to Photos"]})}),(0,o.jsx)("h1",{className:"text-2xl font-bold",children:"Upload New Photo"}),(0,o.jsx)("p",{className:"text-zinc-400",children:"Add a new landscape photograph to your portfolio"})]}),(0,o.jsxs)("div",{className:"grid grid-cols-1 md:grid-cols-2 gap-8",children:[(0,o.jsx)("div",{children:(0,o.jsx)("div",{className:"border-2 border-dashed rounded-lg p-4 h-[400px] flex flex-col items-center justify-center bg-zinc-800/30 border-zinc-700",children:s.image?(0,o.jsxs)("div",{className:"relative w-full h-full",children:[(0,o.jsx)(n.default,{src:s.image,alt:"Preview",fill:!0,className:"object-contain"}),(0,o.jsx)(l.$,{variant:"destructive",size:"icon",className:"absolute top-2 right-2 h-8 w-8",onClick:()=>m({...s,image:""}),children:(0,o.jsx)("span",{className:"h-4 w-4",children:"\xd7"})})]}):(0,o.jsxs)("div",{className:"flex flex-col items-center justify-center",children:[(0,o.jsxs)("p",{className:"text-zinc-400 mb-6 text-center",children:[(0,o.jsx)("span",{className:"font-medium text-white",children:"Upload your landscape photograph"}),(0,o.jsx)("br",{}),"JPG, PNG, WebP up to 10MB"]}),(0,o.jsx)(b,{onUploadSuccess:e=>{m({...s,image:e.secure_url}),p.oR.success("Image uploaded successfully!")}})]})})}),(0,o.jsxs)("form",{onSubmit:y,className:"space-y-6",children:[(0,o.jsxs)("div",{children:[(0,o.jsx)(u.J,{htmlFor:"title",children:"Title"}),(0,o.jsx)(c.p,{id:"title",name:"title",value:s.title,onChange:x,placeholder:"Beautiful Sunset",required:!0})]}),(0,o.jsxs)("div",{children:[(0,o.jsx)(u.J,{htmlFor:"category",children:"Category"}),(0,o.jsx)("select",{id:"category",name:"category",value:s.category,onChange:x,className:"flex h-10 w-full rounded-md border border-zinc-700 bg-zinc-800/30 px-3 py-2 text-sm placeholder:text-zinc-500 focus:outline-none focus:ring-2 focus:ring-zinc-600 disabled:cursor-not-allowed disabled:opacity-50",required:!0,children:f.JN.filter(e=>"All"!==e).map(e=>(0,o.jsx)("option",{value:e,children:e},e))})]}),(0,o.jsxs)("div",{children:[(0,o.jsx)(u.J,{htmlFor:"location",children:"Location"}),(0,o.jsx)(c.p,{id:"location",name:"location",value:s.location,onChange:x,placeholder:"Grand Canyon, Arizona"})]}),(0,o.jsxs)("div",{children:[(0,o.jsx)(u.J,{htmlFor:"description",children:"Description"}),(0,o.jsx)("textarea",{id:"description",name:"description",value:s.description,onChange:x,placeholder:"A breathtaking sunset over the canyon...",className:"flex min-h-[80px] w-full rounded-md border border-zinc-700 bg-zinc-800/30 px-3 py-2 text-sm placeholder:text-zinc-500 focus:outline-none focus:ring-2 focus:ring-zinc-600 disabled:cursor-not-allowed disabled:opacity-50"})]}),(0,o.jsx)(l.$,{type:"submit",disabled:a||!s.image||!s.title,children:a?"Saving...":"Save Photo"})]})]})]})}},530:(e,a,t)=>{"use strict";t.d(a,{JN:()=>o,KQ:()=>r,id:()=>i});let o=["All","Mountains","Deserts","Forests","Oceans","Night Sky","Italy","Travel"],r=[{id:"4c5239b2-a9be-4bca-9f06-840dbd6fc05e",title:"Cuernos Del Paine Beach",category:"Mountains",image:"/uploads/515980e8-cccc-43eb-bcd4-98f7a0e95179.jpg",description:"Beautiful landscape photograph of Cuernos Del Paine Beach",location:"Patagonia, Chile",featured:!0,dateAdded:"2025-03-20T09:56:24.783Z"},{id:"5d7766d0-4898-49ff-8e1f-1d68ffde74d0",title:"Nara Lanterns",category:"Night Sky",image:"/uploads/0c699b59-09d5-498b-96b1-fee1d146d1a8.jpg",description:"Beautiful landscape photograph of Nara Lanterns",location:"Japan",featured:!1,dateAdded:"2025-03-20T09:56:24.784Z"},{id:"7cb6c094-084f-4246-970a-4d8303d1175f",title:"Passo Giau Vertical",category:"Mountains",image:"/uploads/4ac52a48-ce6b-4c41-be3d-8175fac59611.jpg",description:"Beautiful landscape photograph of the Dolomites",location:"Dolomites, Italy",featured:!0,dateAdded:"2025-03-20T09:56:24.784Z"},{id:"6d215144-8604-4912-aea8-2560a2c71611",title:"Iguazu Falls",category:"Forests",image:"/uploads/a32a74b2-3425-478d-b77f-709994739d48.jpg",description:"Beautiful landscape photograph of Iguazu Falls",location:"Brazil",featured:!0,dateAdded:"2025-03-20T09:56:24.784Z"},{id:"c5e9bd41-bb7a-4d25-814d-5f36b7a6018a",title:"Greek Coast",category:"Oceans",image:"/uploads/ac1d9140-5825-440b-8a0c-221d94a247fa.jpg",description:"Beautiful Greek coastal landscape",location:"Greece",featured:!0,dateAdded:"2025-03-20T09:56:24.784Z"},{id:"78ffb2b0-3027-409d-b1fd-6145a2b752fa",title:"Windmills Leros Night",category:"Night Sky",image:"/uploads/c12ce531-80bc-40c3-8b14-f54382ab341e.jpg",description:"Windmills under the night sky",location:"Leros, Greece",featured:!0,dateAdded:"2025-03-20T09:56:24.785Z"},{id:"28b20bbe-a70d-4fc9-8ba0-9d30d6f39a70",title:"Cadini di Misurina",category:"Mountains",image:"/uploads/c8715667-721a-465d-bedc-df749afbd870.jpg",description:"Mountain view with wildflowers in the foreground",location:"Dolomites, Italy",featured:!1,dateAdded:"2025-03-20T09:56:24.785Z"},{id:"336f4d1d-8897-4a0e-a945-88dcc034545b",title:"Kallur Lighthouse",category:"Oceans",image:"/uploads/8d34fadc-14b9-4af6-af8e-9a57e4a15232.jpg",description:"The famous lighthouse with ducks in the foreground",location:"Faroe Islands, Denmark",featured:!0,dateAdded:"2025-03-20T09:56:24.785Z"},{id:"60bc93d2-d245-42cd-816e-5d91d13d98af",title:"Matera Sunset",category:"Night Sky",image:"/uploads/c1fb53d7-542f-460e-9627-ca1a4ef9f754.jpg",description:"A beautiful sunset over the ancient city",location:"Matera, Italy",featured:!0,dateAdded:"2025-03-20T09:56:24.785Z"}],i={name:"Barelands",title:"Landscape Photography",bio:[],avatar:"/avatar.jpg",socialLinks:{instagram:"https://instagram.com/mybarelands"}}},933:(e,a,t)=>{Promise.resolve().then(t.bind(t,124))},1567:(e,a,t)=>{"use strict";t.d(a,{cn:()=>i});var o=t(3463),r=t(9795);function i(){for(var e=arguments.length,a=Array(e),t=0;t<e;t++)a[t]=arguments[t];return(0,r.QP)((0,o.$)(a))}},3312:(e,a,t)=>{"use strict";t.d(a,{$:()=>l});var o=t(5155),r=t(2115),i=t(2317),s=t(1027),d=t(1567);let n=(0,s.F)("inline-flex items-center justify-center gap-2 whitespace-nowrap rounded-md text-sm font-medium transition-colors focus-visible:outline-none focus-visible:ring-1 focus-visible:ring-ring disabled:pointer-events-none disabled:opacity-50 [&_svg]:pointer-events-none [&_svg]:size-4 [&_svg]:shrink-0",{variants:{variant:{default:"bg-primary text-primary-foreground shadow hover:bg-primary/90",destructive:"bg-destructive text-destructive-foreground shadow-sm hover:bg-destructive/90",outline:"border border-input bg-background shadow-sm hover:bg-accent hover:text-accent-foreground",secondary:"bg-secondary text-secondary-foreground shadow-sm hover:bg-secondary/80",ghost:"hover:bg-accent hover:text-accent-foreground",link:"text-primary underline-offset-4 hover:underline"},size:{default:"h-9 px-4 py-2",sm:"h-8 rounded-md px-3 text-xs",lg:"h-10 rounded-md px-8",icon:"h-9 w-9"}},defaultVariants:{variant:"default",size:"default"}}),l=r.forwardRef((e,a)=>{let{className:t,variant:r,size:s,asChild:l=!1,...c}=e,u=l?i.DX:"button";return(0,o.jsx)(u,{className:(0,d.cn)(n({variant:r,size:s,className:t})),ref:a,...c})});l.displayName="Button"},3900:(e,a,t)=>{"use strict";t.d(a,{p:()=>s});var o=t(5155),r=t(2115),i=t(1567);let s=r.forwardRef((e,a)=>{let{className:t,type:r,...s}=e;return(0,o.jsx)("input",{type:r,className:(0,i.cn)("flex h-9 w-full rounded-md border border-input bg-transparent px-3 py-1 text-base shadow-sm transition-colors file:border-0 file:bg-transparent file:text-sm file:font-medium file:text-foreground placeholder:text-muted-foreground focus-visible:outline-none focus-visible:ring-1 focus-visible:ring-ring disabled:cursor-not-allowed disabled:opacity-50 md:text-sm",t),ref:a,...s})});s.displayName="Input"},4762:(e,a,t)=>{"use strict";t.d(a,{s:()=>r});var o=t(4511);function r(e,a){try{(0,o.u4)(e,a)}catch(e){console.error("Error tracking event:",e)}}},8986:(e,a,t)=>{"use strict";t.d(a,{J:()=>l});var o=t(5155),r=t(2115),i=t(6195),s=t(1027),d=t(1567);let n=(0,s.F)("text-sm font-medium leading-none peer-disabled:cursor-not-allowed peer-disabled:opacity-70"),l=r.forwardRef((e,a)=>{let{className:t,...r}=e;return(0,o.jsx)(i.b,{ref:a,className:(0,d.cn)(n(),t),...r})});l.displayName=i.b.displayName}},e=>{var a=a=>e(e.s=a);e.O(0,[844,345,392,212,405,239,441,587,358],()=>a(933)),_N_E=e.O()}]);